#图像预处理
### 颜色空间
RGB颜色空间 R G B

一个图像的维度为 长 宽 颜色通道

HSV颜色空间  色调 饱和度(越靠近中间越红,边上越白) 亮度
 
CIE-XYZ颜色空间 基于人类颜色视觉进行的定义(对蓝色的变化敏感)

### 图片格式 
BMP JPG GIF PNG

### 图像增强的目标
改善图像的视觉效果,转换为更适合于人或机器分析处理的形式

### 图像处理方法
##### 1. 空间域处理:
###### 点运算:HE CLAHE

直方图均衡化:利用图像直方图对对比度进行调整的方法,实质上是对图像进行非线性拉伸.
重新分配各个灰度单位中的像素点数量,使一定灰度范围像素点数量的值大致相等.

自适应直方图均衡(AHE)算法通过对局部区域进行直方图均衡来解决上述问题.

移动模板在原始图片上按特定步长滑动;
每次移动后魔板区域内做直方图均衡,映射后的结果赋值给模板区域内所有点.
每个点都会有多次赋值,最终的取值为这些赋值的均值.

CLAHE
AHE会过度放大图像中相对均匀的噪音,可采用限制对比度自适应直方图均衡(CLAHE)
算法步骤
a.图像分块
b.先计算直方图,然后修剪直方图,最后均衡
c.遍历操作各个图像快,进行块间双线性插值
d.与原图做图层滤色混合操作


###### 形态学运算:腐蚀膨胀

###### 邻域运算:卷积 金字塔
滤波/卷积:在每个图片位置(x,y)上进行基于邻域的函数计算
滤波函数->权重相加
卷积核 卷积模板
$$h[x,y] = \sum_{k,l}{f[k,l]I[x+k,y+l]}$$

不同功能需要定义不同的函数:平滑/去噪, 梯度/锐化, 边缘/显著点/纹理, 模式检测

边界扩充(padding)
卷积的结果一定会使图像大小缩小,需要进行边界填充,获得相同尺寸输出的情况下,卷积核越大,补充越多.
补充类型:补零(zero-padding),边界复制(replication),镜像(reflecting),块复制(wraparound)

3x3的卷积核需要补充一圈,5x5的卷积核需要补充两圈
尽量不要用太大的卷积核去对小的图像做卷积

均值滤波 图像变模糊,细节消失,去噪的效果不明显

中指滤波 有效去除椒盐噪声

平滑高斯滤波 
$$G_{\sigma} = \frac{1}{2\pi\sigma^2}e^{-\frac{x^2+y^2}{2\sigma^2}}$$
根据高斯公式生成一个矩阵,模拟人眼,关注中心区域 主要参数有标准差$\sigma$

$\sigma$越小,关注区域越集中
$\sigma$越大,会变得越模糊
主要用于高斯金字塔操作(当图片离得越远时通过高斯滤波的可以达到图像清晰度相同的效果)

高斯核分解特性(级联高斯)
2D卷积拆分成两个相同的1D卷积:列卷积和行卷积 从k*k次计算降低到了2k次计算

梯度Prewitt滤波/卷积 水平检测和垂直检测
梯度Sobel 水平上有梯度,垂直上有高斯平滑 检测水平梯度和垂直梯度
梯度Laplacian滤波/卷积 二阶微分算子 滤波锐化

图像金字塔化:先对图像进行高斯平滑,然后进行降采样
直接降采样和高斯+降采样:高斯可以让图像更加连贯

拉普拉斯金字塔:高频细节在卷积核下采样过程中会消失,Laplacian可以保留所丢失的高频信息,用于图像恢复.通过上采样可以恢复图像.



##### 2. 频率域处理
###### 傅里叶变换
重要作用:信号分解
欧拉公式:
$$e^{ix} = cosx +isinx$$
$$e^{i\pi}+1=0$$
傅里叶变换公式:
$$f(t)=\frac{1}{2\pi} \int F(w)e^{iwt}dw$$

一般一幅图片傅里叶变换后是一个对称的图片

###### 小波变换





# CNN 卷积神经网络

多层网络的层的通俗:
层实现了输入神经网络到输出神经网络的线性或非线性变换.

前馈神经网络的目标函数:
$$J(w)=\frac{1}{2}||t-z||^2=\frac{1}{2}\sum_{k=1}{(t_k-z_k)}^2$$

(t为输出值,y为目标值)

前面的$\frac{1}{2}$是为了求导方便.

如何计算目标函数的最小值?

梯度下降法:先确定一个初始点,将w按照梯度下降的方向进行调整,就会使得J(w)往更低的方向进行变化,算法的结束将是在w下降到无法继续下降为止.

$$w(m+1)=w(m)+\Delta w(m) = w(m)- \beta \frac{\Phi J}{\Phi w} $$

输出层权重改变量的求解示意图

![梯度下降求权重](../image/梯度下降求权重.png)